language: rust
rust:
    - nightly

addons:
  hosts:
    - foxbox.local

before_script:
    - nvm install 4.2
    - nvm use 4.2
    - npm install selenium-webdriver mocha jshint

script:
    - cargo build # Linter is also executed here
    - RUST_BACKTRACE=1 cargo test
    - jshint static/*.js test/selenium/*.js
    - (cargo run > /dev/null &) ; ./node_modules/.bin/mocha test/selenium/ftu_test.js
